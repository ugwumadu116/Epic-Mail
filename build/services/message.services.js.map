{"version":3,"sources":["../../api/services/message.services.js"],"names":["messageService","getUserEmails","epicMail","userEmail","messageData","message","filter","mail","receiverEmail","getUnreadEmails","status","getSentEmails","senderEmail","getSingleEmail","id","foundEmail","find","postEmail","sentData","subject","lastMessageId","length","currentMessageId","newMessageId","findReceiver","userData","user","newMessage","Messages","createdOn","Date","parentMessageId","push","deleteSingleEmail","emailIndex","indexOf","delMail","splice"],"mappings":"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","sourcesContent":["import messageData from '../utils/dummyMessageData';\r\nimport userData from '../utils/dummyUserData';\r\nimport Messages from '../models/message.model';\r\n\r\nconst messageService = {\r\n  getUserEmails(epicMail) {\r\n    const userEmail = messageData.message\r\n      .filter(mail => mail.receiverEmail === epicMail);\r\n    return userEmail;\r\n  },\r\n  getUnreadEmails(epicMail) {\r\n    const userEmail = messageData.message\r\n      .filter(mail => mail.receiverEmail === epicMail && mail.status === 'unread');\r\n    return userEmail;\r\n  },\r\n  getSentEmails(epicMail) {\r\n    const userEmail = messageData.message\r\n      .filter(mail => mail.senderEmail === epicMail);\r\n    return userEmail;\r\n  },\r\n  getSingleEmail(epicMail, id) {\r\n    const userEmail = messageData.message\r\n      .filter(mail => mail.receiverEmail === epicMail || mail.senderEmail === epicMail);\r\n    const foundEmail = userEmail.find(mail => mail.id === id);\r\n    if (foundEmail) {\r\n      return foundEmail;\r\n    }\r\n    return false;\r\n  },\r\n  postEmail(epicMail, sentData) {\r\n    const {\r\n      subject,\r\n      message,\r\n      receiverEmail,\r\n    } = sentData;\r\n    const lastMessageId = messageData.message.length - 1;\r\n    const currentMessageId = messageData.message[lastMessageId].id;\r\n    const newMessageId = currentMessageId + 1;\r\n\r\n    const findReceiver = userData.user.find(user => user.epicMail === receiverEmail);\r\n    if (findReceiver) {\r\n      const newMessage = new Messages();\r\n      newMessage.id = newMessageId;\r\n      newMessage.createdOn = new Date();\r\n      newMessage.subject = subject;\r\n      newMessage.message = message;\r\n      newMessage.senderEmail = epicMail;\r\n      newMessage.receiverEmail = receiverEmail;\r\n      newMessage.parentMessageId = 0;\r\n      newMessage.status = 'unread';\r\n      messageData.message.push(newMessage);\r\n      return newMessage;\r\n    }\r\n    return false;\r\n  },\r\n\r\n  deleteSingleEmail(epicMail, id) {\r\n    const userEmail = messageData.message\r\n      .find(mail => mail.senderEmail === epicMail && mail.id === id);\r\n    if (userEmail) {\r\n      const emailIndex = messageData.message.indexOf(userEmail);\r\n      const delMail = messageData.message.splice(emailIndex, 1);\r\n      return delMail;\r\n    }\r\n    return false;\r\n  },\r\n};\r\n\r\nexport default messageService;\r\n"],"file":"message.services.js"}